<div class="container" ng-controller="MainController">

  <div class="page-header">
    <h1>Enum-DNS
      <small>interval based ENUM DNS server</small>
    </h1>
  </div>

  <div class="form-group has-feedback">
    <input
      ng-model="query"
      ng-model-options='{ debounce: 250 }'
      ng-change='search()'
      type="search" class="form-control" placeholder="Search for numbers here...">
    <span class="glyphicon glyphicon-search form-control-feedback" aria-hidden="true"></span>
  </div>

  <div class="row">
    <div class="col-md-12 clearfix">
      <div class="pull-left">
        <button ng-disabled="min <= params.from || searching || !searchResult.length || !query" ng-click="previous()"
                type="button"
                class="btn btn-default btn-xs">previous
        </button>
        <button ng-disabled="max >= params.to || searching || !searchResult || !query" ng-click="next()" type="button"
                class="btn btn-default btn-xs">next
        </button>
      </div>
      <div class="pull-right">
        Limit to
        <div class="btn-group btn-xs">
          <label class="btn btn-default btn-xs" ng-model="params.limit" btn-radio="10" ng-change='search()' uncheckable>10</label>
          <label class="btn btn-default btn-xs" ng-model="params.limit" btn-radio="50" ng-change='search()' uncheckable>50</label>
          <label class="btn btn-default btn-xs" ng-model="params.limit" btn-radio="100" ng-change='search()'
                 uncheckable>100</label>
        </div>
        results
      </div>
    </div>
    <br />
  </div>


  <div class="row" ng-if="!searching" ng-repeat="interval in searchResult">
    <div class="col-md-12">

      <div class="panel panel-default">
        <div class="panel-heading">
          [{{ interval.lower }}:{{ interval.upper }}] ({{interval.upper - interval.lower + 1 }} numbers)

          <div class="btn-group pull-right" role="group" aria-label="Actions on interval">
            <button ng-click="edit(interval)" type="button" class="btn btn-default btn-xs" role="button">Edit</button>
            <button ng-click="split(interval)" ng-disabled="(interval.upper - interval.lower) == 0" type="button" class="btn btn-default btn-xs" role="button">Split</button>
            <div class="btn-group" dropdown>
              <button type="button" class="btn btn-default btn-xs" dropdown-toggle
                      aria-haspopup="true"
                      aria-expanded="false">
                Merge <span class="caret"></span>
              </button>
              <ul class="dropdown-menu">
                <li ng-disabled="$first"><a href="#" ng-click="merge(interval, searchResult[$index-1])">up</a></li>
                <li ng-disabled="$last"><a href="#" ng-click="merge(interval, searchResult[$index+1])">down</a></li>
              </ul>
            </div>
          </div>
        </div>
        <table class="table table-condensed">
          <thead>
          <tr>
            <th>Order</th>
            <th>Preference</th>
            <th>Flags</th>
            <th>Service</th>
            <th>Regexp</th>
            <th>Replacement</th>
          </tr>
          </thead>
          <tbody>
          <tr ng-repeat="record in interval.records">
            <td>{{ record.order }}</td>
            <td>{{ record.preference }}</td>
            <td>{{ record.flags }}</td>
            <td>{{ record.service }}</td>
            <td>{{ record.regexp }}</td>
            <td>{{ record.replacement }}</td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="row" ng-if="searchResults">
    <div class="col-md-12">
      <div class="pull-left">
        <button ng-disabled="min <= params.from || searching || !searchResults" ng-click="previous()" type="button"
                class="btn btn-default btn-xs">previous
        </button>
        <button ng-disabled="max >= params.to || searching || !searchResults" ng-click="next()" type="button"
                class="btn btn-default btn-xs">next
        </button>
      </div>

      <div class="pull-right small">
        Limit to
        <div class="btn-group btn-xs">
          <label class="btn btn-default btn-xs" ng-model="params.limit" btn-radio="10" uncheckable>10</label>
          <label class="btn btn-default btn-xs" ng-model="params.limit" btn-radio="50" uncheckable>50</label>
          <label class="btn btn-default btn-xs" ng-model="params.limit" btn-radio="100" uncheckable>100</label>
        </div>
        results
      </div>
    </div>
  </div>

</div>
